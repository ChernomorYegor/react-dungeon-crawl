(this["webpackJsonpreact-dungeon-crawl"]=this["webpackJsonpreact-dungeon-crawl"]||[]).push([[0],{18:function(e,t,a){e.exports=a(29)},23:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),i=a.n(l),o=(a(23),a(3)),c=a(31),s={"GAME/START_GAME":Object(c.a)("GAME/START_GAME"),"GAME/MOVE_LEFT":Object(c.a)("GAME/MOVE_LEFT"),"GAME/MOVE_UP":Object(c.a)("GAME/MOVE_UP"),"GAME/MOVE_RIGHT":Object(c.a)("GAME/MOVE_RIGHT"),"GAME/MOVE_DOWN":Object(c.a)("GAME/MOVE_DOWN"),"GAME/CHANGE_OFFSET":Object(c.a)("GAME/CHANGE_OFFSET"),"GAME/ADD_CERTIFICATE":Object(c.a)("GAME/ADD_CERTIFICATE"),"GAME/START_LEVEL2":Object(c.a)("GAME/START_LEVEL2"),"GAME/ADD_SKILL":Object(c.a)("GAME/ADD_SKILL"),"GAME/REMOVE_BOSS_WALLS":Object(c.a)("GAME/REMOVE_BOSS_WALLS"),"GAME/ADD_POINTS_BOSS":Object(c.a)("GAME/ADD_POINTS_BOSS"),"GAME/QUIT_GAME":Object(c.a)("GAME/QUIT_GAME"),"GAME/END_GAME":Object(c.a)("GAME/END_GAME")},u={"SETTINGS/SHOW_SETTINGS":Object(c.a)("SETTINGS/SHOW_SETTINGS"),"SETTINGS/HIDE_SETTINGS":Object(c.a)("SETTINGS/HIDE_SETTINGS"),"SETTINGS/SAVE_SETTINGS":Object(c.a)("SETTINGS/SAVE_SETTINGS")},m={DIFFICULTY:{easy:20,medium:25,hard:30},CERTIFICATES:25,SKILLS:3,BOSSES:1};var E=function(e){var t=e.showSettings,a=e.startGame,n=e.CERTIFICATES,l=e.BOSSES,i=e.difficulty,o=e.mapWidth,c=e.mapHeight,s=e.generateItems,u=e.getRandomNumber;return r.a.createElement("div",{className:"start-container"},r.a.createElement("h1",null,"Dungeon Crawl"),r.a.createElement("div",{className:"start-menu"},r.a.createElement("button",{type:"button",onClick:function(){var e=u(0,o-1),t=function(e){var t=[],a=Math.ceil(o*i/100);console.log(a);for(var r=0;r<c;r++){var m=[];0===r&&(m[e]="player");for(var E=0;E<a;){var p=u(0,o-1);"wall"!==m[p]&&"player"!==m[p]&&(m[p]="wall",E++)}for(var f=0;f<o;f++)m[f]||(m[f]="empty");t.push(m)}return function(e,t){var a=Math.floor(c/t),n=0;console.log(a);for(;n<c;){var r=u(n,n+a-5),l=u(0,o-5);console.log(n);for(var i=1;i<4;i++)e[r][l]="boss-wall",e[r+i][l]="boss-wall",e[r][l+i]="boss-wall",e[r+i][l+3]="boss-wall",e[r+3][l+i]="boss-wall";for(var s=1;s<3;s++)e[r+1][l+s]="boss",e[r+2][l+s]="boss";n+=a}}(t,l),s(t,n,"certificate"),t}(e);console.log(t,e),a({map:t,playerX:e})}},"Start Game"),r.a.createElement("button",{type:"button",onClick:t},"Settings")))},p=Object(o.b)((function(e){return{CERTIFICATES:m.CERTIFICATES,BOSSES:m.BOSSES,difficulty:e.settings.difficulty,mapWidth:e.settings.mapWidth,mapHeight:e.settings.mapHeight}}),(function(e){return{startGame:function(t){var a=t.map,n=t.playerX;return e(s["GAME/START_GAME"]({map:a,playerX:n}))},showSettings:function(){return e(u["SETTINGS/SHOW_SETTINGS"]())}}}))(E),f=a(8);var g=function(e){var t=e.CERTIFICATES,a=e.SKILLS,l=e.gameMap,i=e.currentCertificates,o=e.currentSkills,c=e.isDefeatedBoss,s=e.level,u=e.points,m=e.currentOffset,E=e.playerX,p=e.playerY,g=e.difficulty,S=e.mapWidth,d=e.mapHeight,b=e.viewportHeight,h=e.moveLeft,O=e.moveUp,v=e.moveRight,A=e.moveDown,T=e.changeOffset,y=e.addCertificate,G=e.startLevel2,M=e.addSkill,w=e.removeBossWalls,I=e.addPointsBoss,_=e.quitGame,j=e.endGame,N=e.windowHeight,H=e.generateItems,D=Object(n.useState)(""),k=Object(f.a)(D,2),L=k[0],C=k[1],R=Math.floor(51*N/(100*b));function W(e,t,a){if(e>0){C(t);var n=setTimeout((function(){C("")}),a);return function(){return clearTimeout(n)}}}function V(e){if("certificate"===e){if(i===t-1){var n=l.slice();console.log("map",n),H(n,a,"skill"),console.log("map",n),G({map:n})}y(Math.round(F(1)))}if("skill"===e){if(o===a-1){var r=l.slice();console.log("map",r),r.forEach((function(e,t){return e.forEach((function(e,a){"boss-wall"===e&&(console.log("square-change",e),r[t][a]="empty")}))})),console.log("map",r),w({map:r})}M(Math.round(F(10)))}"boss"===e&&(I(Math.round(F(30))),j())}function F(e){return e*g*(d/100)*(10/b)}function B(){window.confirm("Are you sure you want to quit?")&&_()}return console.log("squareSize",R),Object(n.useEffect)((function(){if(!c){var e=function(e){switch(e.key){case"ArrowLeft":if(console.log("ArrowLeft"),0===E&&"wall"!==l[p][S-1]&&"boss-wall"!==l[p][S-1]){V(l[p][S-1]),h(S-1);break}if(0!==E&&"wall"!==l[p][E-1]&&"boss-wall"!==l[p][E-1]){V(l[p][E-1]),h(E-1);break}break;case"ArrowUp":if(console.log("ArrowUp"),0===p)break;if("wall"!==l[p-1][E]&&"boss-wall"!==l[p-1][E]){p<=3+m&&!(p<=3)&&T(m-1),V(l[p-1][E]),O(p-1);break}break;case"ArrowRight":if(console.log("ArrowRight"),E===S-1&&"wall"!==l[p][0]&&"boss-wall"!==l[p][0]){V(l[p][0]),h(0);break}if(E!==S-1&&"wall"!==l[p][E+1]&&"boss-wall"!==l[p][E+1]){V(l[p][E+1]),v(E+1);break}break;case"ArrowDown":if(console.log("ArrowDown"),p===l.length-1)break;if("wall"!==l[p+1][E]&&"boss-wall"!==l[p+1][E]){p>=b-1-3+m&&!(p>=d-1-3)&&T(m+1),V(l[p+1][E]),A(p+1);break}break;case"Escape":console.log("Quit Game"),B()}};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}}),[E,p]),Object(n.useEffect)((function(){W(i,"+1 certificate",500)}),[i]),Object(n.useEffect)((function(){W(o,"+1 skill",500)}),[o]),r.a.createElement("div",{className:"game"},r.a.createElement("div",{className:"top-bar-head"},r.a.createElement("h2",null,"Dungeon Crawl"),r.a.createElement("button",{className:"btn-quit",type:"text",onClick:B},"Quit Game")),r.a.createElement("div",{className:"top-bar"},r.a.createElement("div",{className:"top-bar-stats"},r.a.createElement("div",null,"Level: ",r.a.createElement("span",null,s)),r.a.createElement("div",null,r.a.createElement("p",null,"Certificates: ",r.a.createElement("span",null,i,"/",t)),r.a.createElement("progress",{value:i,max:t})),r.a.createElement("div",null,r.a.createElement("p",null,"Skills: ",r.a.createElement("span",null,o,"/",a)),r.a.createElement("progress",{value:o,max:a})),r.a.createElement("div",null,"Points: ",r.a.createElement("span",null,u))),r.a.createElement("div",{className:"messages"},r.a.createElement("p",null,L),1===s&&r.a.createElement("p",null,"Collect 25 certificates."),2===s&&o<a&&r.a.createElement("p",null,"Collect 3 skills."),2===s&&o===a&&!c&&r.a.createElement("p",null,"Find the boss."))),r.a.createElement("div",{className:"map"},c?r.a.createElement("div",{className:"game-over"},r.a.createElement("p",null,"Congratulations!"),r.a.createElement("p",null,"You left the dungeon!"),r.a.createElement("p",{className:"result"},"Your result: ",u," points.")):function(){for(var e=[],t=m;t<m+b;t++){var a=l[t];e.push(a)}return console.log(e),console.log(m),e.map((function(e,t){return r.a.createElement("div",{className:t+m===0?"row-map first":t+m===d-1?"row-map last":"row-map",key:t+m},e.map((function(e,a){return r.a.createElement("div",{className:"square ".concat(e),key:"".concat(t+m).concat(a),style:{width:"".concat(R,"px"),height:"".concat(R,"px")}})})))}))}()),r.a.createElement("div",{className:"bottom-bar"},r.a.createElement("div",null,r.a.createElement("p",null,"Press 'Arrows' on the keyboard to move."),r.a.createElement("p",null,"Press 'Esc' to quit the game or click the button at the top right."))))},S=Object(o.b)((function(e){return{CERTIFICATES:m.CERTIFICATES,SKILLS:m.SKILLS,gameMap:e.game.map,currentCertificates:e.game.certificates,currentSkills:e.game.skills,isDefeatedBoss:e.game.isDefeatedBoss,level:e.game.level,points:e.game.points,currentOffset:e.game.currentOffset,playerX:e.game.playerX,playerY:e.game.playerY,difficulty:e.settings.difficulty,mapWidth:e.settings.mapWidth,mapHeight:e.settings.mapHeight,viewportHeight:e.settings.viewportHeight}}),(function(e){return{moveLeft:function(t){return e(s["GAME/MOVE_LEFT"](t))},moveUp:function(t){return e(s["GAME/MOVE_UP"](t))},moveRight:function(t){return e(s["GAME/MOVE_RIGHT"](t))},moveDown:function(t){return e(s["GAME/MOVE_DOWN"](t))},changeOffset:function(t){return e(s["GAME/CHANGE_OFFSET"](t))},addCertificate:function(t){return e(s["GAME/ADD_CERTIFICATE"](t))},startLevel2:function(t){var a=t.map;return e(s["GAME/START_LEVEL2"]({map:a}))},addSkill:function(t){return e(s["GAME/ADD_SKILL"](t))},removeBossWalls:function(t){var a=t.map;return e(s["GAME/REMOVE_BOSS_WALLS"]({map:a}))},addPointsBoss:function(t){return e(s["GAME/ADD_POINTS_BOSS"](t))},quitGame:function(){return e(s["GAME/QUIT_GAME"]())},endGame:function(){return e(s["GAME/END_GAME"]())}}}))(g);var d=function(e){var t=e.difficultyOptions,a=e.difficulty,l=(e.mapWidth,e.mapHeight),i=(e.viewportWidth,e.viewportHeight),o=e.backToStartMenu,c=e.saveSettings,s=Object(n.useState)(a),u=Object(f.a)(s,2),m=u[0],E=u[1],p=Object(n.useState)(l),g=Object(f.a)(p,2),S=g[0],d=g[1],b=Object(n.useState)(i),h=Object(f.a)(b,2),O=h[0],v=h[1];function A(e,t){switch(e){case"Difficulty":E(+t.target.value);break;case"Map Height":d(+t.target.value);break;case"Viewport Height":v(+t.target.value)}}return r.a.createElement("div",{className:"settings"},r.a.createElement("div",{className:"top-bar-head"},r.a.createElement("h3",null,"Settings"),r.a.createElement("button",{className:"btn-back",type:"text",onClick:o},"Back")),r.a.createElement("form",{className:"settings-form",onSubmit:function(e){e.preventDefault(),console.log({difficultyInner:m,mapHeightInner:S,viewportHeightInner:O}),c({difficultyInner:m,mapHeightInner:S,viewportHeightInner:O})}},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"difficulty"},"Difficulty:"),r.a.createElement("select",{id:"difficulty",value:m,onChange:A.bind(this,"Difficulty")},r.a.createElement("option",{value:t.easy},"Easy"),r.a.createElement("option",{value:t.medium},"Medium"),r.a.createElement("option",{value:t.hard},"Hard"))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"map-height"},"Map Height ",r.a.createElement("small",null,"(50 - 500)"),":"),r.a.createElement("input",{id:"map-height",type:"number",value:S,min:"50",max:"500",step:"5",onChange:A.bind(this,"Map Height")})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"viewport-height"},"Viewport Height ",r.a.createElement("small",null,"(10 - 20)"),":"),r.a.createElement("input",{id:"viewport-height",type:"number",value:O,min:"10",max:"20",step:"1",onChange:A.bind(this,"Viewport Height")})),r.a.createElement("button",{type:"submit",className:"btn-save"},"Save")))},b=Object(o.b)((function(e){return{difficultyOptions:m.DIFFICULTY,difficulty:e.settings.difficulty,mapWidth:e.settings.mapWidth,mapHeight:e.settings.mapHeight,viewportWidth:e.settings.viewportWidth,viewportHeight:e.settings.viewportHeight}}),(function(e){return{backToStartMenu:function(){return e(u["SETTINGS/HIDE_SETTINGS"]())},saveSettings:function(t){var a=t.difficultyInner,n=t.mapHeightInner,r=t.viewportHeightInner;return e(u["SETTINGS/SAVE_SETTINGS"]({difficultyInner:a,mapHeightInner:n,viewportHeightInner:r}))}}}))(d);var h=function(e){var t=e.isSettingsShow,a=e.gameOn,n=e.mapWidth,l=e.mapHeight,i=document.documentElement.clientHeight;function o(e,t,a){var r=Math.floor(l/t),i=0,o=0;for(l%t!==0&&(i=1,o=Math.ceil(l%t)-1),console.log("itemBalance",o),console.log("itemsInterval",r);i<l;){var s=c(i,i+r-1),u=c(0,n-1);console.log("itemVar",i),"empty"===e[s][u]&&(0===u||u===n-1||0===s||s===l-1||"wall"!==e[s][u-1]&&"boss-wall"!==e[s][u-1]||"wall"!==e[s+1][u]&&"boss-wall"!==e[s+1][u]||"wall"!==e[s][u+1]&&"boss-wall"!==e[s][u+1]||"wall"!==e[s-1][u]&&"boss-wall"!==e[s-1][u])&&(e[s][u]=a,o>0?(i+=r+1,o--):0===o&&(i+=r))}}function c(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}return console.log("windowHeight",i),r.a.createElement("div",{style:{height:i+"px"}},!t&&!a&&r.a.createElement(p,{generateItems:o,getRandomNumber:c}),a&&r.a.createElement(S,{windowHeight:i,generateItems:o}),t&&r.a.createElement(b,null))},O=Object(o.b)((function(e){return{isSettingsShow:e.settings.isSettingsShow,gameOn:e.game.gameOn,mapWidth:e.settings.mapWidth,mapHeight:e.settings.mapHeight}}),(function(e){return{}}))(h);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var v,A,T=a(5),y=a(1),G=a(2),M=a.n(G),w=a(30),I=Object(w.a)((v={},Object(y.a)(v,u["SETTINGS/SHOW_SETTINGS"],(function(e,t){return M()(e,{$merge:{isSettingsShow:!0}})})),Object(y.a)(v,u["SETTINGS/HIDE_SETTINGS"],(function(e,t){return M()(e,{$merge:{isSettingsShow:!1}})})),Object(y.a)(v,u["SETTINGS/SAVE_SETTINGS"],(function(e,t){return M()(e,{$merge:{difficulty:t.payload.difficultyInner,mapHeight:t.payload.mapHeightInner,viewportHeight:t.payload.viewportHeightInner}})})),v),{isSettingsShow:!1,difficulty:20,mapWidth:20,mapHeight:100,viewportWidth:20,viewportHeight:10}),_={gameOn:!1,map:[],certificates:0,skills:0,isDefeatedBoss:!1,level:0,points:0,currentOffset:0,playerX:0,playerY:0},j=Object(w.a)((A={},Object(y.a)(A,s["GAME/START_GAME"],(function(e,t){return console.log(t.payload),M()(e,{$merge:{gameOn:!0,map:t.payload.map,level:1,playerX:t.payload.playerX}})})),Object(y.a)(A,s["GAME/MOVE_LEFT"],(function(e,t){var a;return M()(e,{map:Object(y.a)({},e.playerY,(a={},Object(y.a)(a,e.playerX,{$set:"empty"}),Object(y.a)(a,t.payload,{$set:"player"}),a)),playerX:{$set:t.payload}})})),Object(y.a)(A,s["GAME/MOVE_UP"],(function(e,t){var a;return M()(e,{map:(a={},Object(y.a)(a,e.playerY,Object(y.a)({},e.playerX,{$set:"empty"})),Object(y.a)(a,t.payload,Object(y.a)({},e.playerX,{$set:"player"})),a),playerY:{$set:t.payload}})})),Object(y.a)(A,s["GAME/MOVE_RIGHT"],(function(e,t){var a;return M()(e,{map:Object(y.a)({},e.playerY,(a={},Object(y.a)(a,e.playerX,{$set:"empty"}),Object(y.a)(a,t.payload,{$set:"player"}),a)),playerX:{$set:t.payload}})})),Object(y.a)(A,s["GAME/MOVE_DOWN"],(function(e,t){var a;return M()(e,{map:(a={},Object(y.a)(a,e.playerY,Object(y.a)({},e.playerX,{$set:"empty"})),Object(y.a)(a,t.payload,Object(y.a)({},e.playerX,{$set:"player"})),a),playerY:{$set:t.payload}})})),Object(y.a)(A,s["GAME/CHANGE_OFFSET"],(function(e,t){return M()(e,{$merge:{currentOffset:t.payload}})})),Object(y.a)(A,s["GAME/ADD_CERTIFICATE"],(function(e,t){return M()(e,{$merge:{certificates:e.certificates+1,points:e.points+t.payload}})})),Object(y.a)(A,s["GAME/START_LEVEL2"],(function(e,t){return M()(e,{$merge:{map:t.payload.map,level:2}})})),Object(y.a)(A,s["GAME/ADD_SKILL"],(function(e,t){return M()(e,{$merge:{skills:e.skills+1,points:e.points+t.payload}})})),Object(y.a)(A,s["GAME/REMOVE_BOSS_WALLS"],(function(e,t){return M()(e,{$merge:{map:t.payload.map}})})),Object(y.a)(A,s["GAME/ADD_POINTS_BOSS"],(function(e,t){return M()(e,{$merge:{points:e.points+t.payload}})})),Object(y.a)(A,s["GAME/QUIT_GAME"],(function(e,t){return M()(e,{$merge:{gameOn:_.gameOn,map:_.map,certificates:_.certificates,skills:_.skills,isDefeatedBoss:_.isDefeatedBoss,level:_.level,points:_.points,currentOffset:_.currentOffset,playerX:_.playerX,playerY:_.playerY}})})),Object(y.a)(A,s["GAME/END_GAME"],(function(e,t){return M()(e,{$merge:{isDefeatedBoss:!0}})})),A),_),N=Object(T.c)({settings:I,game:j}),H=a(17),D=a.n(H),k=Object(T.d)(N,Object(T.a)(D.a));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:k},r.a.createElement(O,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.b8ddd134.chunk.js.map