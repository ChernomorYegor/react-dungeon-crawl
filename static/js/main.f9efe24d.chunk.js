(this["webpackJsonpreact-dungeon-crawl"]=this["webpackJsonpreact-dungeon-crawl"]||[]).push([[0],{18:function(e,t,a){e.exports=a(29)},23:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),l=a.n(i),o=(a(23),a(3)),c=a(31),s={"GAME/START_GAME":Object(c.a)("GAME/START_GAME"),"GAME/MOVE_LEFT":Object(c.a)("GAME/MOVE_LEFT"),"GAME/MOVE_UP":Object(c.a)("GAME/MOVE_UP"),"GAME/MOVE_RIGHT":Object(c.a)("GAME/MOVE_RIGHT"),"GAME/MOVE_DOWN":Object(c.a)("GAME/MOVE_DOWN"),"GAME/CHANGE_OFFSET_X":Object(c.a)("GAME/CHANGE_OFFSET_X"),"GAME/CHANGE_OFFSET_Y":Object(c.a)("GAME/CHANGE_OFFSET_Y"),"GAME/ADD_CERTIFICATE":Object(c.a)("GAME/ADD_CERTIFICATE"),"GAME/START_LEVEL2":Object(c.a)("GAME/START_LEVEL2"),"GAME/ADD_SKILL":Object(c.a)("GAME/ADD_SKILL"),"GAME/REMOVE_BOSS_WALLS":Object(c.a)("GAME/REMOVE_BOSS_WALLS"),"GAME/ADD_POINTS_BOSS":Object(c.a)("GAME/ADD_POINTS_BOSS"),"GAME/QUIT_GAME":Object(c.a)("GAME/QUIT_GAME"),"GAME/END_GAME":Object(c.a)("GAME/END_GAME")},u={"SETTINGS/SHOW_SETTINGS":Object(c.a)("SETTINGS/SHOW_SETTINGS"),"SETTINGS/HIDE_SETTINGS":Object(c.a)("SETTINGS/HIDE_SETTINGS"),"SETTINGS/SAVE_SETTINGS":Object(c.a)("SETTINGS/SAVE_SETTINGS")},m={DIFFICULTY:{easy:20,medium:25,hard:30},CERTIFICATES:25,SKILLS:3,BOSSES:1};var E=function(e){var t=e.CERTIFICATES,a=e.BOSSES,n=e.difficulty,i=e.mapWidth,l=e.mapHeight,o=e.viewportWidth,c=e.generateItems,s=e.getRandomNumber,u=e.startGame,m=e.showSettings;return r.a.createElement("div",{className:"start-container"},r.a.createElement("h1",null,"Dungeon Crawl"),r.a.createElement("div",{className:"start-menu"},r.a.createElement("button",{type:"button",onClick:function(){var e=s(0,o-1),r=function(e){var r=[],o=Math.ceil(i*n/100);console.log(o);for(var u=0;u<l;u++){var m=[];0===u&&(m[e]="player");for(var E=0;E<o;){var p=s(0,i-1);"wall"===m[p]||"player"===m[p]||1===u&&p===e||(m[p]="wall",E++)}for(var f=0;f<i;f++)m[f]||(m[f]="empty");r.push(m)}return function(e,t){var a=Math.floor(l/t),n=0;console.log(a);for(;n<l-1;){var r=s(n+1,n+a-5),o=s(0,i-5);console.log(n);for(var c=1;c<4;c++)e[r][o]="boss-wall",e[r+c][o]="boss-wall",e[r][o+c]="boss-wall",e[r+c][o+3]="boss-wall",e[r+3][o+c]="boss-wall";for(var u=1;u<3;u++)e[r+1][o+u]="boss",e[r+2][o+u]="boss";n+=a}}(r,a),c(r,t,"certificate"),r}(e);console.log(r,e),u({map:r,playerX:e})}},"Start Game"),r.a.createElement("button",{type:"button",onClick:m},"Settings")))},p=Object(o.b)((function(e){return{CERTIFICATES:m.CERTIFICATES,BOSSES:m.BOSSES,difficulty:e.settings.difficulty,mapWidth:e.settings.mapWidth,mapHeight:e.settings.mapHeight,viewportWidth:e.settings.viewportWidth}}),(function(e){return{startGame:function(t){var a=t.map,n=t.playerX;return e(s["GAME/START_GAME"]({map:a,playerX:n}))},showSettings:function(){return e(u["SETTINGS/SHOW_SETTINGS"]())}}}))(E),f=a(8);var g=function(e){var t=e.CERTIFICATES,a=e.SKILLS,i=e.gameMap,l=e.currentCertificates,o=e.currentSkills,c=e.isDefeatedBoss,s=e.level,u=e.points,m=e.currentOffsetX,E=e.currentOffsetY,p=e.playerX,g=e.playerY,S=e.difficulty,d=e.mapWidth,h=e.mapHeight,O=e.viewportWidth,b=e.viewportHeight,v=e.moveLeft,A=e.moveUp,T=e.moveRight,G=e.moveDown,y=e.changeOffsetX,M=e.changeOffsetY,w=e.addCertificate,I=e.startLevel2,_=e.addSkill,j=e.removeBossWalls,N=e.addPointsBoss,H=e.quitGame,D=e.endGame,C=e.windowHeight,k=e.generateItems,L=Object(n.useState)(""),F=Object(f.a)(L,2),W=F[0],R=F[1],V=Math.floor(51*C/(100*b));function X(e,t,a){if(e>0){R(t);var n=setTimeout((function(){R("")}),a);return function(){return clearTimeout(n)}}}function Y(e){if("certificate"===e){if(l===t-1){var n=i.slice();console.log("map",n),k(n,a,"skill"),console.log("map",n),I({map:n})}w(Math.round(B(1)))}if("skill"===e){if(o===a-1){var r=i.slice();console.log("map",r),r.forEach((function(e,t){return e.forEach((function(e,a){"boss-wall"===e&&(console.log("square-change",e),r[t][a]="empty")}))})),console.log("map",r),j({map:r})}_(Math.round(B(10)))}"boss"===e&&(N(Math.round(B(30))),D())}function B(e){return e*S*(h/100)*(10/b)}function $(){window.confirm("Are you sure you want to quit?")&&H()}return console.log("squareSize",V),Object(n.useEffect)((function(){if(!c){var e=function(e){switch(e.key){case"ArrowLeft":if(console.log("ArrowLeft"),0===p&&"wall"!==i[g][d-1]&&"boss-wall"!==i[g][d-1]){y(d-1-(O-1)),Y(i[g][d-1]),v(d-1);break}if(0!==p&&"wall"!==i[g][p-1]&&"boss-wall"!==i[g][p-1]){p<=3+m&&!(p<=3)&&y(m-1),Y(i[g][p-1]),v(p-1);break}break;case"ArrowUp":if(console.log("ArrowUp"),0===g)break;if("wall"!==i[g-1][p]&&"boss-wall"!==i[g-1][p]){g<=3+E&&!(g<=3)&&M(E-1),Y(i[g-1][p]),A(g-1);break}break;case"ArrowRight":if(console.log("ArrowRight"),p===d-1&&"wall"!==i[g][0]&&"boss-wall"!==i[g][0]){y(0),Y(i[g][0]),v(0);break}if(p!==d-1&&"wall"!==i[g][p+1]&&"boss-wall"!==i[g][p+1]){p>=O-1-3+m&&!(p>=d-1-3)&&y(m+1),Y(i[g][p+1]),T(p+1);break}break;case"ArrowDown":if(console.log("ArrowDown"),g===i.length-1)break;if("wall"!==i[g+1][p]&&"boss-wall"!==i[g+1][p]){g>=b-1-3+E&&!(g>=h-1-3)&&M(E+1),Y(i[g+1][p]),G(g+1);break}break;case"Escape":console.log("Quit Game"),$()}};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}}),[p,g]),Object(n.useEffect)((function(){X(l,"+1 certificate",500)}),[l]),Object(n.useEffect)((function(){X(o,"+1 skill",500)}),[o]),r.a.createElement("div",{className:"game"},r.a.createElement("div",{className:"top-bar-head"},r.a.createElement("h2",null,"Dungeon Crawl"),r.a.createElement("button",{className:"btn-quit",type:"text",onClick:$},"Quit Game")),r.a.createElement("div",{className:"top-bar"},r.a.createElement("div",{className:"top-bar-stats"},r.a.createElement("div",null,"Level: ",r.a.createElement("span",null,s)),r.a.createElement("div",null,r.a.createElement("p",null,"Certificates: ",r.a.createElement("span",null,l,"/",t)),r.a.createElement("progress",{value:l,max:t})),r.a.createElement("div",null,r.a.createElement("p",null,"Skills: ",r.a.createElement("span",null,o,"/",a)),r.a.createElement("progress",{value:o,max:a})),r.a.createElement("div",null,"Points: ",r.a.createElement("span",null,u))),r.a.createElement("div",{className:"messages"},r.a.createElement("p",null,W),1===s&&r.a.createElement("p",null,"Collect 25 certificates."),2===s&&o<a&&r.a.createElement("p",null,"Collect 3 skills."),2===s&&o===a&&!c&&r.a.createElement("p",null,"Find the boss."))),r.a.createElement("div",{className:"map"},c?r.a.createElement("div",{className:"game-over"},r.a.createElement("p",null,"Congratulations!"),r.a.createElement("p",null,"You left the dungeon!"),r.a.createElement("p",{className:"result"},"Your result: ",u," points.")):function(){for(var e=[],t=E;t<E+b;t++){var a=i[t].slice(m,m+O);e.push(a)}return console.log("visibleMap",e),console.log("currentOffsetY",E),console.log("currentOffsetX",m),e.map((function(e,t){return r.a.createElement("div",{className:t+E===0?"row-map first":t+E===h-1?"row-map last":"row-map",key:t+E},e.map((function(e,a){return r.a.createElement("div",{className:"square ".concat(e),key:"".concat(t+E).concat(a+m),style:{width:"".concat(V,"px"),height:"".concat(V,"px")}})})))}))}()),r.a.createElement("div",{className:"bottom-bar"},r.a.createElement("div",null,r.a.createElement("p",null,"Press 'Arrows' on the keyboard to move."),r.a.createElement("p",null,"Press 'Esc' to quit the game or click the button at the top right."))))},S=Object(o.b)((function(e){return{CERTIFICATES:m.CERTIFICATES,SKILLS:m.SKILLS,gameMap:e.game.map,currentCertificates:e.game.certificates,currentSkills:e.game.skills,isDefeatedBoss:e.game.isDefeatedBoss,level:e.game.level,points:e.game.points,currentOffsetX:e.game.currentOffsetX,currentOffsetY:e.game.currentOffsetY,playerX:e.game.playerX,playerY:e.game.playerY,difficulty:e.settings.difficulty,mapWidth:e.settings.mapWidth,mapHeight:e.settings.mapHeight,viewportWidth:e.settings.viewportWidth,viewportHeight:e.settings.viewportHeight}}),(function(e){return{moveLeft:function(t){return e(s["GAME/MOVE_LEFT"](t))},moveUp:function(t){return e(s["GAME/MOVE_UP"](t))},moveRight:function(t){return e(s["GAME/MOVE_RIGHT"](t))},moveDown:function(t){return e(s["GAME/MOVE_DOWN"](t))},changeOffsetX:function(t){return e(s["GAME/CHANGE_OFFSET_X"](t))},changeOffsetY:function(t){return e(s["GAME/CHANGE_OFFSET_Y"](t))},addCertificate:function(t){return e(s["GAME/ADD_CERTIFICATE"](t))},startLevel2:function(t){var a=t.map;return e(s["GAME/START_LEVEL2"]({map:a}))},addSkill:function(t){return e(s["GAME/ADD_SKILL"](t))},removeBossWalls:function(t){var a=t.map;return e(s["GAME/REMOVE_BOSS_WALLS"]({map:a}))},addPointsBoss:function(t){return e(s["GAME/ADD_POINTS_BOSS"](t))},quitGame:function(){return e(s["GAME/QUIT_GAME"]())},endGame:function(){return e(s["GAME/END_GAME"]())}}}))(g);var d=function(e){var t=e.difficultyOptions,a=e.difficulty,i=(e.mapWidth,e.mapHeight),l=(e.viewportWidth,e.viewportHeight),o=e.backToStartMenu,c=e.saveSettings,s=Object(n.useState)(a),u=Object(f.a)(s,2),m=u[0],E=u[1],p=Object(n.useState)(i),g=Object(f.a)(p,2),S=g[0],d=g[1],h=Object(n.useState)(l),O=Object(f.a)(h,2),b=O[0],v=O[1];function A(e,t){switch(e){case"Difficulty":E(+t.target.value);break;case"Map Height":d(+t.target.value);break;case"Viewport Height":v(+t.target.value)}}return r.a.createElement("div",{className:"settings"},r.a.createElement("div",{className:"top-bar-head"},r.a.createElement("h3",null,"Settings"),r.a.createElement("button",{className:"btn-back",type:"text",onClick:o},"Back")),r.a.createElement("form",{className:"settings-form",onSubmit:function(e){e.preventDefault(),console.log({difficultyInner:m,mapHeightInner:S,viewportHeightInner:b}),c({difficultyInner:m,mapHeightInner:S,viewportHeightInner:b})}},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"difficulty"},"Difficulty:"),r.a.createElement("select",{id:"difficulty",value:m,onChange:A.bind(this,"Difficulty")},r.a.createElement("option",{value:t.easy},"Easy"),r.a.createElement("option",{value:t.medium},"Medium"),r.a.createElement("option",{value:t.hard},"Hard"))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"map-height"},"Map Height ",r.a.createElement("small",null,"(50 - 500)"),":"),r.a.createElement("input",{id:"map-height",type:"number",value:S,min:"50",max:"500",step:"5",onChange:A.bind(this,"Map Height")})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"viewport-height"},"Viewport Height ",r.a.createElement("small",null,"(10 - 20)"),":"),r.a.createElement("input",{id:"viewport-height",type:"number",value:b,min:"10",max:"20",step:"1",onChange:A.bind(this,"Viewport Height")})),r.a.createElement("button",{type:"submit",className:"btn-save"},"Save")))},h=Object(o.b)((function(e){return{difficultyOptions:m.DIFFICULTY,difficulty:e.settings.difficulty,mapWidth:e.settings.mapWidth,mapHeight:e.settings.mapHeight,viewportWidth:e.settings.viewportWidth,viewportHeight:e.settings.viewportHeight}}),(function(e){return{backToStartMenu:function(){return e(u["SETTINGS/HIDE_SETTINGS"]())},saveSettings:function(t){var a=t.difficultyInner,n=t.mapHeightInner,r=t.viewportHeightInner;return e(u["SETTINGS/SAVE_SETTINGS"]({difficultyInner:a,mapHeightInner:n,viewportHeightInner:r}))}}}))(d);var O=function(e){var t=e.isSettingsShow,a=e.gameOn,n=e.mapWidth,i=e.mapHeight,l=document.documentElement.clientHeight;function o(e,t,a){var r=Math.floor(i/t),l=0,o=0;for(i%t!==0&&(l=1,o=Math.ceil(i%t)-1),console.log("itemBalance",o),console.log("itemsInterval",r);l<i;){var s=c(l,l+r-1),u=c(0,n-1);console.log("itemVar",l),"empty"!==e[s][u]||0!==u&&u!==n-1&&0!==s&&s!==i-1&&m(s,u-1)&&m(s,u+1)&&m(s-1,u)&&m(s+1,u)||0===s&&0===u&&m(s,u+1)&&m(s+1,u)&&m(s,n-1)||0===s&&u===n-1&&m(s,u-1)&&m(s+1,u)&&m(s,0)||s===i-1&&u===n-1&&m(s,u-1)&&m(s-1,u)&&m(s,0)||s===i-1&&0===u&&m(s,u+1)&&m(s-1,u)&&m(s,n-1)||0===s&&0!==u&&u!==n-1&&m(s,u-1)&&m(s,u+1)&&m(s+1,u)||s===i-1&&0!==u&&u!==n-1&&m(s,u-1)&&m(s,u+1)&&m(s-1,u)||0===u&&0!==s&&s!==i-1&&m(s,u+1)&&m(s+1,u)&&m(s-1,u)||u===n-1&&0!==s&&s!==i-1&&m(s,u-1)&&m(s+1,u)&&m(s-1,u)||(e[s][u]=a,o>0?(l+=r+1,o--):0===o&&(l+=r))}function m(t,a){return"wall"===e[t][a]||"boss-wall"===e[t][a]}}function c(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}return console.log("windowHeight",l),r.a.createElement("div",{style:{height:l+"px"}},!t&&!a&&r.a.createElement(p,{generateItems:o,getRandomNumber:c}),a&&r.a.createElement(S,{windowHeight:l,generateItems:o}),t&&r.a.createElement(h,null))},b=Object(o.b)((function(e){return{isSettingsShow:e.settings.isSettingsShow,gameOn:e.game.gameOn,mapWidth:e.settings.mapWidth,mapHeight:e.settings.mapHeight}}),(function(e){return{}}))(O);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var v,A,T=a(5),G=a(1),y=a(2),M=a.n(y),w=a(30),I=Object(w.a)((v={},Object(G.a)(v,u["SETTINGS/SHOW_SETTINGS"],(function(e,t){return M()(e,{$merge:{isSettingsShow:!0}})})),Object(G.a)(v,u["SETTINGS/HIDE_SETTINGS"],(function(e,t){return M()(e,{$merge:{isSettingsShow:!1}})})),Object(G.a)(v,u["SETTINGS/SAVE_SETTINGS"],(function(e,t){return M()(e,{$merge:{difficulty:t.payload.difficultyInner,mapHeight:t.payload.mapHeightInner,viewportHeight:t.payload.viewportHeightInner}})})),v),{isSettingsShow:!1,difficulty:20,mapWidth:20,mapHeight:100,viewportWidth:20,viewportHeight:10}),_={gameOn:!1,map:[],certificates:0,skills:0,isDefeatedBoss:!1,level:0,points:0,currentOffsetX:0,currentOffsetY:0,playerX:0,playerY:0},j=Object(w.a)((A={},Object(G.a)(A,s["GAME/START_GAME"],(function(e,t){return console.log(t.payload),M()(e,{$merge:{gameOn:!0,map:t.payload.map,level:1,playerX:t.payload.playerX}})})),Object(G.a)(A,s["GAME/MOVE_LEFT"],(function(e,t){var a;return M()(e,{map:Object(G.a)({},e.playerY,(a={},Object(G.a)(a,e.playerX,{$set:"empty"}),Object(G.a)(a,t.payload,{$set:"player"}),a)),playerX:{$set:t.payload}})})),Object(G.a)(A,s["GAME/MOVE_UP"],(function(e,t){var a;return M()(e,{map:(a={},Object(G.a)(a,e.playerY,Object(G.a)({},e.playerX,{$set:"empty"})),Object(G.a)(a,t.payload,Object(G.a)({},e.playerX,{$set:"player"})),a),playerY:{$set:t.payload}})})),Object(G.a)(A,s["GAME/MOVE_RIGHT"],(function(e,t){var a;return M()(e,{map:Object(G.a)({},e.playerY,(a={},Object(G.a)(a,e.playerX,{$set:"empty"}),Object(G.a)(a,t.payload,{$set:"player"}),a)),playerX:{$set:t.payload}})})),Object(G.a)(A,s["GAME/MOVE_DOWN"],(function(e,t){var a;return M()(e,{map:(a={},Object(G.a)(a,e.playerY,Object(G.a)({},e.playerX,{$set:"empty"})),Object(G.a)(a,t.payload,Object(G.a)({},e.playerX,{$set:"player"})),a),playerY:{$set:t.payload}})})),Object(G.a)(A,s["GAME/CHANGE_OFFSET_X"],(function(e,t){return M()(e,{$merge:{currentOffsetX:t.payload}})})),Object(G.a)(A,s["GAME/CHANGE_OFFSET_Y"],(function(e,t){return M()(e,{$merge:{currentOffsetY:t.payload}})})),Object(G.a)(A,s["GAME/ADD_CERTIFICATE"],(function(e,t){return M()(e,{$merge:{certificates:e.certificates+1,points:e.points+t.payload}})})),Object(G.a)(A,s["GAME/START_LEVEL2"],(function(e,t){return M()(e,{$merge:{map:t.payload.map,level:2}})})),Object(G.a)(A,s["GAME/ADD_SKILL"],(function(e,t){return M()(e,{$merge:{skills:e.skills+1,points:e.points+t.payload}})})),Object(G.a)(A,s["GAME/REMOVE_BOSS_WALLS"],(function(e,t){return M()(e,{$merge:{map:t.payload.map}})})),Object(G.a)(A,s["GAME/ADD_POINTS_BOSS"],(function(e,t){return M()(e,{$merge:{points:e.points+t.payload}})})),Object(G.a)(A,s["GAME/QUIT_GAME"],(function(e,t){return M()(e,{$merge:{gameOn:_.gameOn,map:_.map,certificates:_.certificates,skills:_.skills,isDefeatedBoss:_.isDefeatedBoss,level:_.level,points:_.points,currentOffsetY:_.currentOffsetY,playerX:_.playerX,playerY:_.playerY}})})),Object(G.a)(A,s["GAME/END_GAME"],(function(e,t){return M()(e,{$merge:{isDefeatedBoss:!0}})})),A),_),N=Object(T.c)({settings:I,game:j}),H=a(17),D=a.n(H),C=Object(T.d)(N,Object(T.a)(D.a));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:C},r.a.createElement(b,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.f9efe24d.chunk.js.map